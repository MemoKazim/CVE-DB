from colors import bcolors
import threading
import time
import sys
import os

is_active = True

def wheel_output(source):
    print(f"{bcolors.FG_YELLOW}[│] Generating {source}...", end="")
    while is_active:
        for _ in ["/", "─", "\\", "│"]:
            print(f"\r[{_}] Generating {source}...", end="")
            time.sleep(0.1)
    print(f"\r{bcolors.FG_GREEN}[+] Generating {source} FINISHED!{bcolors.END}")

def pdf():
    time.sleep(5)
    # HERE WILL BE OUTPUT CODE

def html():
    time.sleep(5)
    # HERE WILL BE OUTPUT CODE

def txt():
    time.sleep(5)
    # HERE WILL BE OUTPUT CODE

def cli():
    print(f"{bcolors.FG_GREEN}[+] Entering page view!{bcolors.END}")
    proceed = input(f"{bcolors.FG_YELLOW}Do you want to enter page view? (Y/n)> {bcolors.END}").lower()
    while proceed not in ["y", "n", ""]:
        proceed = input(f"{bcolors.FG_YELLOW}Do you want to enter page view? (Y/n)> {bcolors.END}").lower()
    if proceed == "" or proceed == "y":
        os.system(f"more .\cli_sample")
    else:
        sys.exit()


def generate(source, function):
    global is_active
    t1 = threading.Thread(target=function)
    t2 = None
    if source != "cli": t2 = threading.Thread(target=wheel_output,args=(source,))
    t1.start()
    if t2: t2.start()
    time.sleep(2)
    while t1.is_alive(): pass
    is_active = False
    if t2: t2.join()
    is_active = True
